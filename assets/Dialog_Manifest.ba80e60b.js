import{C as E,j as r,b as d,v as I,w as b,G as W,F as x,H as F,u as P,t as $,a as ae}from"./vendor.de8f02d8.js";import{M as g,U as M,c as z,O as C,a as A,f as ve,b as xe,I as we,d as _e,e as ke,g as Se}from"./index.8c4109a5.js";function Te(s,e,t){return Math.max(e,Math.min(s,t))}const v={toVector(s,e){return s===void 0&&(s=e),Array.isArray(s)?s:[s,s]},add(s,e){return[s[0]+e[0],s[1]+e[1]]},sub(s,e){return[s[0]-e[0],s[1]-e[1]]},addTo(s,e){s[0]+=e[0],s[1]+=e[1]},subTo(s,e){s[0]-=e[0],s[1]-=e[1]}};function X(s,e,t){return e===0||Math.abs(e)===1/0?Math.pow(s,t*5):s*e*t/(e+t*s)}function Q(s,e,t,n=.15){return n===0?Te(s,e,t):s<e?-X(e-s,t-e,n)+e:s>t?+X(s-t,t-e,n)+t:s}function Ne(s,[e,t],[n,i]){const[[o,c],[l,f]]=s;return[Q(e,o,c,n),Q(t,l,f,i)]}function w(s,e,t){return e in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function J(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),t.push.apply(t,n)}return t}function m(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?J(Object(t),!0).forEach(function(n){w(s,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):J(Object(t)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(t,n))})}return s}const ce={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function Z(s){return s?s[0].toUpperCase()+s.slice(1):""}const Oe=["enter","leave"];function Ce(s=!1,e){return s&&!Oe.includes(e)}function Ee(s,e="",t=!1){const n=ce[s],i=n&&n[e]||e;return"on"+Z(s)+Z(i)+(Ce(t,i)?"Capture":"")}const Ie=["gotpointercapture","lostpointercapture"];function Ae(s){let e=s.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const n=Ie.includes(e)?"capturecapture":"capture",i=!!~e.indexOf(n);return i&&(e=e.replace("capture","")),{device:e,capture:i,passive:t}}function De(s,e=""){const t=ce[s],n=t&&t[e]||e;return s+n}function q(s){return"touches"in s}function le(s){return q(s)?"touch":"pointerType"in s?s.pointerType:"mouse"}function Me(s){return Array.from(s.touches).filter(e=>{var t,n;return e.target===s.currentTarget||((t=s.currentTarget)===null||t===void 0||(n=t.contains)===null||n===void 0?void 0:n.call(t,e.target))})}function Pe(s){return s.type==="touchend"||s.type==="touchcancel"?s.changedTouches:s.targetTouches}function de(s){return q(s)?Pe(s)[0]:s}function Re(s){return Me(s).map(e=>e.identifier)}function H(s){const e=de(s);return q(s)?e.identifier:e.pointerId}function ee(s){const e=de(s);return[e.clientX,e.clientY]}function Ue(s){const e={};if("buttons"in s&&(e.buttons=s.buttons),"shiftKey"in s){const{shiftKey:t,altKey:n,metaKey:i,ctrlKey:o}=s;Object.assign(e,{shiftKey:t,altKey:n,metaKey:i,ctrlKey:o})}return e}function V(s,...e){return typeof s=="function"?s(...e):s}function Le(){}function Be(...s){return s.length===0?Le:s.length===1?s[0]:function(){let e;for(const t of s)e=t.apply(this,arguments)||e;return e}}function te(s,e){return Object.assign({},e,s||{})}const je=32;class Ke{constructor(e,t,n){this.ctrl=e,this.args=t,this.key=n,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:n,args:i}=this;t[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,n=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=n.from?V(n.from,t):t.offset,t.offset=t.lastOffset),t.startTime=t.timeStamp=e.timeStamp}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:n,shared:i}=this;t.args=this.args;let o=0;if(e&&(t.event=e,n.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,Ue(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,o=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const S=t._delta.map(Math.abs);v.addTo(t._distance,S)}this.axisIntent&&this.axisIntent(e);const[c,l]=t._movement,[f,u]=n.threshold,{_step:a,values:p}=t;if(n.hasCustomTransform?(a[0]===!1&&(a[0]=Math.abs(c)>=f&&p[0]),a[1]===!1&&(a[1]=Math.abs(l)>=u&&p[1])):(a[0]===!1&&(a[0]=Math.abs(c)>=f&&Math.sign(c)*f),a[1]===!1&&(a[1]=Math.abs(l)>=u&&Math.sign(l)*u)),t.intentional=a[0]!==!1||a[1]!==!1,!t.intentional)return;const h=[0,0];if(n.hasCustomTransform){const[S,be]=p;h[0]=a[0]!==!1?S-a[0]:0,h[1]=a[1]!==!1?be-a[1]:0}else h[0]=a[0]!==!1?c-a[0]:0,h[1]=a[1]!==!1?l-a[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(h);const k=t.offset,N=t._active&&!t._blocked||t.active;N&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=i[this.ingKey]=t._active,e&&(t.first&&("bounds"in n&&(t._bounds=V(n.bounds,t)),this.setup&&this.setup()),t.movement=h,this.computeOffset()));const[L,B]=t.offset,[[G,pe],[me,ge]]=t._bounds;t.overflow=[L<G?-1:L>pe?1:0,B<me?-1:B>ge?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const ye=t._active?n.rubberband||[0,0]:[0,0];if(t.offset=Ne(t._bounds,t.offset,ye),t.delta=v.sub(t.offset,k),this.computeMovement(),N&&(!t.last||o>je)){t.delta=v.sub(t.offset,k);const S=t.delta.map(Math.abs);v.addTo(t.distance,S),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&o>0&&(t.velocity=[S[0]/o,S[1]/o])}}emit(){const e=this.state,t=this.shared,n=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!n.triggerAllEvents)return;const i=this.handler(m(m(m({},t),e),{},{[this.aliasKey]:e.values}));i!==void 0&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function Ve([s,e],t){const n=Math.abs(s),i=Math.abs(e);if(n>i&&n>t)return"x";if(i>n&&i>t)return"y"}class We extends Ke{constructor(...e){super(...e),w(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=v.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=v.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,n=this.config;if(!t.axis&&e){const i=typeof n.axisThreshold=="object"?n.axisThreshold[le(e)]:n.axisThreshold;t.axis=Ve(t._movement,i)}t._blocked=(n.lockDirection||!!n.axis)&&!t.axis||!!n.axis&&n.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const Fe=s=>s,se=.15,ue={enabled(s=!0){return s},eventOptions(s,e,t){return m(m({},t.shared.eventOptions),s)},preventDefault(s=!1){return s},triggerAllEvents(s=!1){return s},rubberband(s=0){switch(s){case!0:return[se,se];case!1:return[0,0];default:return v.toVector(s)}},from(s){if(typeof s=="function")return s;if(s!=null)return v.toVector(s)},transform(s,e,t){const n=s||t.shared.transform;return this.hasCustomTransform=!!n,n||Fe},threshold(s){return v.toVector(s,0)}},qe=0,R=m(m({},ue),{},{axis(s,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(s=qe){return s},bounds(s={}){if(typeof s=="function")return o=>R.bounds(s(o));if("current"in s)return()=>s.current;if(typeof HTMLElement=="function"&&s instanceof HTMLElement)return s;const{left:e=-1/0,right:t=1/0,top:n=-1/0,bottom:i=1/0}=s;return[[e,t],[n,i]]}}),j=10,ne={ArrowRight:(s=1)=>[j*s,0],ArrowLeft:(s=1)=>[-j*s,0],ArrowUp:(s=1)=>[0,-j*s],ArrowDown:(s=1)=>[0,j*s]};class Ge extends We{constructor(...e){super(...e),w(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),n=e.currentTarget.getBoundingClientRect(),i={left:t.left-n.left+e.offset[0],right:t.right-n.right+e.offset[0],top:t.top-n.top+e.offset[1],bottom:t.bottom-n.bottom+e.offset[1]};e._bounds=R.bounds(i)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,n=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const i=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(i&&i.size>1&&n._pointerActive)&&(this.start(e),this.setupPointer(e),n._pointerId=H(e),n._pointerActive=!0,this.computeValues(ee(e)),this.computeInitial(),t.preventScrollAxis&&le(e)!=="mouse"?(n._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,n=this.config;if(!t._pointerActive||t.type===e.type&&e.timeStamp===t.timeStamp)return;const i=H(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;const o=ee(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=v.sub(o,t._values),this.computeValues(o)),v.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(n.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===n.preventScrollAxis||n.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,n=this.config;if(!t._active||!t._pointerActive)return;const i=H(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[o,c]=t._distance;if(t.tap=o<=n.tapsThreshold&&c<=n.tapsThreshold,t.tap&&n.filterTaps)t._force=!0;else{const[l,f]=t.direction,[u,a]=t.velocity,[p,h]=t.movement,[k,N]=n.swipe.velocity,[L,B]=n.swipe.distance,G=n.swipe.duration;t.elapsedTime<G&&(Math.abs(u)>k&&Math.abs(p)>L&&(t.swipe[0]=l),Math.abs(a)>N&&Math.abs(h)>B&&(t.swipe[1]=f))}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,n=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,He(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=ne[e.key];if(t){const n=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),n._delta=t(i),n._keyboardActive=!0,v.addTo(n._movement,n._delta),this.compute(e),this.emit()}}keyUp(e){e.key in ne&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function He(s){"persist"in s&&typeof s.persist=="function"&&s.persist()}const U=typeof window<"u"&&window.document&&window.document.createElement;function Ye(){return U&&"ontouchstart"in window}function ie(){return Ye()||U&&window.navigator.maxTouchPoints>1}function $e(){return U&&"onpointerdown"in window}function ze(){return U&&"exitPointerLock"in window.document}function Xe(){try{return"constructor"in GestureEvent}catch{return!1}}const _={isBrowser:U,gesture:Xe(),touch:ie(),touchscreen:ie(),pointer:$e(),pointerLock:ze()},Qe=250,Je=180,Ze=.5,et=50,tt=250,re={mouse:0,touch:0,pen:8},st=m(m({},R),{},{device(s,e,{pointer:{touch:t=!1,lock:n=!1,mouse:i=!1}={}}){return this.pointerLock=n&&_.pointerLock,_.touch&&t?"touch":this.pointerLock?"mouse":_.pointer&&!i?"pointer":_.touch?"touch":"mouse"},preventScrollAxis(s,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&s?Qe:void 0,!(!_.touchscreen||t===!1))return s||(t!==void 0?"y":void 0)},pointerCapture(s,e,{pointer:{capture:t=!0,buttons:n=1}={}}){return this.pointerButtons=n,!this.pointerLock&&this.device==="pointer"&&t},keys(s=!0){return s},threshold(s,e,{filterTaps:t=!1,tapsThreshold:n=3,axis:i=void 0}){const o=v.toVector(s,t?n:i?1:0);return this.filterTaps=t,this.tapsThreshold=n,o},swipe({velocity:s=Ze,distance:e=et,duration:t=tt}={}){return{velocity:this.transform(v.toVector(s)),distance:this.transform(v.toVector(e)),duration:t}},delay(s=0){switch(s){case!0:return Je;case!1:return 0;default:return s}},axisThreshold(s){return s?m(m({},re),s):re}});m(m({},ue),{},{device(s,e,{shared:t,pointer:{touch:n=!1}={}}){if(t.target&&!_.touch&&_.gesture)return"gesture";if(_.touch&&n)return"touch";if(_.touchscreen){if(_.pointer)return"pointer";if(_.touch)return"touch"}},bounds(s,e,{scaleBounds:t={},angleBounds:n={}}){const i=c=>{const l=te(V(t,c),{min:-1/0,max:1/0});return[l.min,l.max]},o=c=>{const l=te(V(n,c),{min:-1/0,max:1/0});return[l.min,l.max]};return typeof t!="function"&&typeof n!="function"?[i(),o()]:c=>[i(c),o(c)]},threshold(s,e,t){return this.lockDirection=t.axis==="lock",v.toVector(s,this.lockDirection?[.1,3]:0)},modifierKey(s){return s===void 0?"ctrlKey":s}});m(m({},R),{},{mouseOnly:(s=!0)=>s});m(m({},R),{},{mouseOnly:(s=!0)=>s});const fe=new Map,Y=new Map;function nt(s){fe.set(s.key,s.engine),Y.set(s.key,s.resolver)}const it={key:"drag",engine:Ge,resolver:st};function rt(s,e){if(s==null)return{};var t={},n=Object.keys(s),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(t[i]=s[i]);return t}function ot(s,e){if(s==null)return{};var t=rt(s,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(s);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(s,n)||(t[n]=s[n]))}return t}const at={target(s){if(s)return()=>"current"in s?s.current:s},enabled(s=!0){return s},window(s=_.isBrowser?window:void 0){return s},eventOptions({passive:s=!0,capture:e=!1}={}){return{passive:s,capture:e}},transform(s){return s}},ct=["target","eventOptions","window","enabled","transform"];function K(s={},e){const t={};for(const[n,i]of Object.entries(e))switch(typeof i){case"function":t[n]=i.call(t,s[n],n,s);break;case"object":t[n]=K(s[n],i);break;case"boolean":i&&(t[n]=s[n]);break}return t}function lt(s,e){const t=s,{target:n,eventOptions:i,window:o,enabled:c,transform:l}=t,f=ot(t,ct),u={shared:K({target:n,eventOptions:i,window:o,enabled:c,transform:l},at)};if(e){const a=Y.get(e);u[e]=K(m({shared:u.shared},f),a)}else for(const a in f){const p=Y.get(a);p&&(u[a]=K(m({shared:u.shared},f[a]),p))}return u}class he{constructor(e,t){w(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,n,i,o){const c=this._listeners,l=De(t,n),f=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},u=m(m({},f),o);e.addEventListener(l,i,u);const a=()=>{e.removeEventListener(l,i,u),c.delete(a)};return c.add(a),a}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class dt{constructor(){w(this,"_timeouts",new Map)}add(e,t,n=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(t,n,...i))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class ut{constructor(e){w(this,"gestures",new Set),w(this,"_targetEventStore",new he(this)),w(this,"gestureEventStores",{}),w(this,"gestureTimeoutStores",{}),w(this,"handlers",{}),w(this,"config",{}),w(this,"pointerIds",new Set),w(this,"touchIds",new Set),w(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),ft(this,e)}setEventIds(e){if(q(e))return this.touchIds=new Set(Re(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=lt(e,t)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,n={};let i;if(!(t.target&&(i=t.target(),!i))){if(t.enabled){for(const c of this.gestures){const l=this.config[c],f=oe(n,l.eventOptions,!!i);if(l.enabled){const u=fe.get(c);new u(this,e,c).bind(f)}}const o=oe(n,t.eventOptions,!!i);for(const c in this.nativeHandlers)o(c,"",l=>this.nativeHandlers[c](m(m({},this.state.shared),{},{event:l,args:e})),void 0,!0)}for(const o in n)n[o]=Be(...n[o]);if(!i)return n;for(const o in n){const{device:c,capture:l,passive:f}=Ae(o);this._targetEventStore.add(i,c,"",n[o],{capture:l,passive:f})}}}}function O(s,e){s.gestures.add(e),s.gestureEventStores[e]=new he(s,e),s.gestureTimeoutStores[e]=new dt}function ft(s,e){e.drag&&O(s,"drag"),e.wheel&&O(s,"wheel"),e.scroll&&O(s,"scroll"),e.move&&O(s,"move"),e.pinch&&O(s,"pinch"),e.hover&&O(s,"hover")}const oe=(s,e,t)=>(n,i,o,c={},l=!1)=>{var f,u;const a=(f=c.capture)!==null&&f!==void 0?f:e.capture,p=(u=c.passive)!==null&&u!==void 0?u:e.passive;let h=l?n:Ee(n,i,a);t&&p&&(h+="Passive"),s[h]=s[h]||[],s[h].push(o)};function ht(s,e={},t,n){const i=E.useMemo(()=>new ut(s),[]);if(i.applyHandlers(s,n),i.applyConfig(e,t),E.useEffect(i.effect.bind(i)),E.useEffect(()=>i.clean.bind(i),[]),e.target===void 0)return i.bind.bind(i)}function pt(s,e){return nt(it),ht({drag:s},e||{},"drag")}function D({label:s,groupName:e,value:t,checked:n,...i}){return d("label",{className:"h-6 flex items-center space-x-1.5",...i,children:[r("input",{className:"w-3 h-3 checked:bg-gray-400 focus:ring-indigo-500 focus:ring-offset-0",type:"radio",value:t,defaultChecked:n,...e&&{name:e}}),r("div",{children:s})]})}function mt({value:s,setValue:e}){return d("div",{className:"px-3 py-2 max-w-max flex flex-col space-y-1 border border-gray-300 rounded",onChange:t=>e(+t.target.value),children:[r(C,{trigger:r(D,{groupName:"how",value:0,checked:s===0,label:"Same as original url"}),...A(),children:r("div",{className:"text-xs",children:"Same as original url"})}),r(C,{trigger:r(D,{groupName:"how",value:1,checked:s===1,label:"Match only domain of original url"}),...A(),children:r("div",{className:"text-xs",children:"Match only domain of original url"})}),r(C,{trigger:r(D,{groupName:"how",value:2,checked:s===2,label:"Wildcard match"}),...A(),children:r("div",{className:"text-xs",children:"Wildcard match"})}),r(C,{trigger:r(D,{groupName:"how",value:3,checked:s===3,label:"Regular expresssion"}),...A(),children:r("div",{className:"text-xs",children:"Regular expresssion"})}),r(C,{trigger:r(D,{groupName:"how",value:4,checked:s===4,label:"No domain match"}),...A(),children:r("div",{className:"text-xs",children:"Exclude this login from domain match"})})]})}function gt(s){return["Original url","Match only domain of original url","Wildcard string","Regular expresssion",d(x,{children:["Match original url ",r("span",{className:"text-xs",children:"(url params will be ignored)"})]})][s]||"No way"}function yt({urlsAtom:s,initialMD:e}){const[t,n]=P(s),i=$(t.dirtyAtom),[o,c]=E.useState(e);b.exports.useEffect(()=>{c(g.getMatchRawData(t.m))},[t.m]),b.exports.useEffect(()=>{if(o.style===g.Style.undef){const a={...t,m:t.o};n(a),i(T(a))}},[t.o]);const[l,f]=b.exports.useState(""),u=o.style===g.Style.undef;return d(x,{children:[d("div",{className:"flex space-x-4",children:[r(mt,{value:o.style,setValue:a=>{const p={...t,m:g.makeRawMatchData({...o,style:a},t.o)};n(p),i(T(p))}}),!!e.opt&&d("div",{children:[d("label",{className:"mt-1 h-6 flex items-center space-x-1",children:[r("input",{type:"checkbox",className:"rounded focus:ring-indigo-500 focus:ring-offset-0",checked:(o.opt&g.Options.caseinsensitive)!==0,onChange:a=>{let p=a.target.checked?o.opt|g.Options.caseinsensitive:o.opt&~g.Options.caseinsensitive;const h={...t,m:g.makeRawMatchData({...o,opt:p},t.o)};n(h),i(T(h))}}),r("div",{children:"Case sensitive"})]}),d("label",{className:"mt-1 h-6 flex items-center space-x-1",children:[r("input",{type:"checkbox",className:"rounded focus:ring-indigo-500 focus:ring-offset-0",checked:(o.opt&g.Options.matchtext)!==0,onChange:a=>{let p=a.target.checked?o.opt|g.Options.matchtext:o.opt&~g.Options.matchtext;const h={...t,m:g.makeRawMatchData({...o,opt:p},t.o)};n(h),i(T(h))}}),r("div",{children:"Match text"})]}),d("label",{className:"mt-1 h-6 flex items-center space-x-1",children:[r("input",{type:"checkbox",className:"rounded focus:ring-indigo-500 focus:ring-offset-0",checked:(o.opt&g.Options.usequery)!==0,onChange:a=>{let p=a.target.checked?o.opt|g.Options.usequery:o.opt&~g.Options.usequery;const h={...t,m:g.makeRawMatchData({...o,opt:p},t.o)};n(h),i(T(h))}}),r("div",{children:"Use url query params"})]})]})]}),r("div",{className:`mt-1 mb-1 ${u?"opacity-50":""}`,children:gt(o.style)}),r("input",{className:z("px-2 py-1.5 w-full border rounded shadow-inner",l?"border-red-400":"border-gray-400",u?"opacity-50":""),...l&&{title:l},disabled:u,spellCheck:!1,value:o.url,title:t.m,onChange:a=>n({...t,m:g.makeRawMatchData({...o,url:a.target.value},t.o)})}),d("div",{className:"mt-3 px-2 pt-2 text-[.65rem] bg-yellow-100 border border-yellow-400 rounded-sm cursor-default",title:"This is how url will be stored",children:[r("div",{className:"-mt-4 ",children:r("span",{className:"px-1 bg-yellow-200 border border-yellow-500 rounded-sm select-none",children:"Final raw format"})}),r("div",{className:"overflow-x-auto break-all",children:t.m})]})]})}function bt({urlsAtom:s}){const e=I(s),[t,n]=b.exports.useState(e.o!==e.m),[i]=b.exports.useState(g.getMatchRawData(e.m)),o=W({height:t?"auto":0,opacity:t?1:0,config:{duration:200}});return d(x,{children:[d("div",{className:"mt-6 mb-1 flex items-center",children:[d("div",{className:"w-28 font-bold text-gray-600 flex items-center space-x-1",onClick:()=>n(!t),children:[r("div",{className:"",children:"Matching url"}),r(M,{double:!0,isUp:t,className:"w-5 h-5 border rounded"})]}),e.o===e.m&&r("label",{className:"flex items-center text-xs",children:r("div",{className:"ml-5",children:"same as original url"})})]}),t&&r(F.div,{style:o,children:r(yt,{urlsAtom:s,initialMD:i})})]})}function vt({urlsAtom:s}){const[e,t]=P(s),n=$(e.dirtyAtom);return d(x,{children:[r("div",{className:"mb-1 font-bold text-gray-600",children:"Original url"}),r("input",{className:"px-2 py-1.5 w-full border border-gray-400 rounded shadow-inner",spellCheck:!1,value:e.o,onChange:i=>{const o={...e,o:i.target.value};t(o),n(T(o))}})]})}function xt({urlsAtom:s}){const[e,t]=P(s),n=$(e.dirtyAtom),[i,o]=b.exports.useState(!1),c=W({height:i?"auto":0,opacity:i?1:0,config:{duration:200}});return d(x,{children:[d("div",{className:"mt-6 mb-1 flex items-center",children:[d("div",{className:"w-28 font-bold text-gray-600 flex items-center space-x-1",onClick:()=>o(!i),children:[r("div",{className:"",children:"Quicklink url"}),r(M,{double:!0,isUp:i,className:"w-5 h-5 border rounded"})]}),e.o===e.q&&r("label",{className:"flex items-center text-xs",children:r("div",{className:"ml-5",children:"same as original url"})})]}),i&&r(F.div,{style:c,children:r("input",{className:"px-2 py-1.5 w-full border border-gray-400 rounded shadow-inner",spellCheck:!1,value:e.q,onChange:l=>{const f={...e,q:l.target.value};t(f),n(T(f))}})})]})}function T(s){return s.m!==s.initial.m||s.o!==s.initial.o||s.q!==s.initial.q}function wt({urlsAtom:s}){return r("div",{className:"p-4",children:d("div",{className:"grid grid-cols-1",children:[r(vt,{urlsAtom:s})," ",r(bt,{urlsAtom:s}),r(xt,{urlsAtom:s})]})})}function _t({editorData:s}){return r("div",{className:"p-4",children:"Windows match is comming soon..."})}function y(){return d(x,{children:[r("div",{className:"mt-1 mb-1 font-bold text-gray-600",children:"Quicklink name"}),r("input",{className:"px-2 py-1.5 w-full border border-gray-400 rounded shadow-inner",spellCheck:!1,value:"",readOnly:!0})]})}function kt({editorData:s}){const[e,t]=b.exports.useState(!1),[n,i]=b.exports.useState(!1);return d("div",{className:"p-4",children:[r("div",{className:"mb-1 font-bold text-gray-600",children:"Choice name"}),r("input",{className:"px-2 py-1.5 w-full border border-gray-400 rounded shadow-inner",spellCheck:!1,value:"",readOnly:!0}),d("label",{className:"mt-4 h-6 flex items-center space-x-1",children:[r("input",{type:"checkbox",className:"rounded focus:ring-indigo-500 focus:ring-offset-0",checked:!0,onChange:o=>{}}),r("div",{children:"Show in quicklinks list"})]}),r("div",{className:"mt-1 mb-1 font-bold text-gray-600",children:"Quicklink name"}),r("input",{className:"px-2 py-1.5 w-full border border-gray-400 rounded shadow-inner",spellCheck:!1,value:"",readOnly:!0}),d("div",{className:"mt-4 w-28 font-bold text-gray-600 flex items-center space-x-1",onClick:()=>t(!e),children:[r("div",{className:"",children:"Group 1"}),r(M,{double:!0,isUp:e,className:"w-5 h-5 border rounded"})]}),e&&d(x,{children:[r(y,{}),r(y,{}),r(y,{}),r(y,{}),r(y,{}),r(y,{})]}),d("div",{className:"mt-4 w-28 font-bold text-gray-600 flex items-center space-x-1",onClick:()=>i(!n),children:[r("div",{className:"",children:"Group 2"}),r(M,{double:!0,isUp:n,className:"w-5 h-5 border rounded"})]}),n&&d(x,{children:[r(y,{}),r(y,{}),r(y,{}),r(y,{}),r(y,{}),r(y,{})]})]})}function St({editorData:s}){return r("div",{className:"p-4",children:"Windows form script fields editor is comming soon..."})}function Tt({editorData:s}){const[e,t]=P(s.fileUsAtom),n=e.meta?.[s.formIdx]?.disp.isScript,[i,o]=E.useState(!1);return r(x,{children:n?r(St,{editorData:s}):d("div",{className:"p-4",children:["Web form fields editor is comming soon...",d("div",{className:"mt-4 w-28 font-bold text-gray-600 flex items-center space-x-1",onClick:()=>o(!i),children:[r("div",{className:"",children:"Policy"}),r(M,{double:!0,isUp:i,className:"w-5 h-5 border rounded"})]}),i&&d(x,{children:[r(y,{}),r(y,{}),r(y,{}),r(y,{}),r(y,{}),r(y,{})]})]})})}function Nt({tabs:s,active:e,setActive:t}){const n=b.exports.useRef(null),i=b.exports.useRef(null),o=b.exports.useRef(s.map(E.createRef)),[c,l]=W(()=>({x:0,y:0,width:0,height:0,config:{mass:.3,tension:280,friction:14}}));return b.exports.useEffect(()=>{function f(){const u=n.current?.getBoundingClientRect(),a=o.current[e].current;if(u&&a){const{top:p,left:h,width:k,height:N}=a.getBoundingClientRect();l.start({x:h-u.x,y:p-u.y,width:k,height:N})}}f()},[e,n.current,i.current,o.current]),d("div",{ref:n,className:"relative flex",children:[r(F.div,{ref:i,style:{...c,filter:"drop-shadow(#0003 0px 0px .05rem)"},className:"absolute bg-gray-50 rounded border border-gray-900/50 z-[1] shadow"}),r("div",{className:"flex justify-items-start space-x-1",children:s.map((f,u)=>r("button",{ref:o.current[u],className:z("px-4 py-2.5 leading-5 text-sm font-medium text-gray-700 rounded focus:outline-none z-10",e===u?"":"text-gray-700/80 hover:bg-white/[0.2] hover:text-white/75"),style:{filter:"drop-shadow(#0005 0px 0px .1rem)"},onClick:()=>t(u),children:f},f))})]})}function Ot({urlsAtom:s}){const e=I(s),t=I(e.dirtyAtom);return r(x,{children:t&&r(Se,{className:"self-end w-4 h-4 text-[#f6673b]",fill:"#ffad42",style:{filter:"drop-shadow(#f66b3b7a 0px 0px 0.15rem)"},title:"Modified"})})}function Ct({editorData:s}){const e=I(s.fileUsAtom),t=e.stats,n=`${ve(s.formIdx)}`,i=xe({fname:e.fname,classLg:"px-1 text-[.65rem] font-bold text-gray-600 opacity-100"});return r(C,{trigger:r(we,{className:"w-7 h-7 text-gray-300",style:{filter:"drop-shadow(#907bdab0 0px 0px .2rem)"},fill:"#fff",stroke:"#0004",strokeWidth:1}),arrow:!0,children:d("div",{className:"text-xs grid grid-cols-[auto,1fr] gap-x-2",children:[r("div",{className:"font-bold",children:"Form"}),r("div",{children:n}),t.domain&&d(x,{children:[r("div",{className:"font-bold",children:"Domain"}),r("div",{children:t.domain})]}),r("div",{className:"font-bold",children:"Filename"}),r("div",{children:i}),t.dateCreated&&d(x,{children:[r("div",{className:"font-bold",children:"Created"}),r("div",{children:t.dateCreated})]}),t.dateModified&&d(x,{children:[r("div",{className:"font-bold",children:"Modified"}),r("div",{children:t.dateModified})]})]})})}function Et({setShow:s}){return d("div",{className:"flex space-x-2",children:[r("button",{className:"px-4 py-2 min-w-[6rem] h-9 leading-4 text-gray-900 bg-gray-200 border border-gray-500 rounded shadow active:scale-[.97]",onClick:()=>{s(!1)},children:"OK"}),r("button",{className:"px-4 py-2 min-w-[6rem] h-9 leading-4 text-gray-900 bg-gray-200 border border-gray-500 rounded shadow active:scale-[.97]",onClick:()=>{s(!1)},children:"Cancel"})]})}function It({pageComponents:s,selectedTabAtom:e}){const t=I(e);return r(x,{children:s.map((n,i)=>r("div",{className:z(t!==i&&"hidden"),children:n},i))})}function At({pageNames:s,stateIndicator:e,dialogContentBody:t,selectedTabAtom:n,dragBind:i}){const[o,c]=P(n),l=b.exports.useRef(),f=b.exports.useRef(Array(s.length).fill(0));b.exports.useLayoutEffect(()=>{l.current&&(l.current.scrollTop=f.current[o])},[o]);function u(a){f.current[o]=l.current?.scrollTop||0,c(a)}return d("div",{className:"grid grid-rows-[auto,minmax(0,1fr)]",children:[d("div",{className:"px-4 pt-4 pb-2 bg-blue-900/20 flex items-center justify-between touch-none",...i(),children:[r(Nt,{tabs:s,active:o,setActive:u}),e]}),r("div",{className:"text-sm bg-white",children:r(_e,{className:"text-gray-500 overflow-auto w-full h-full",scrollableNodeProps:{ref:l},autoHide:!1,children:t})})]})}function Dt({footer:s,urlsAtom:e,editorData:t}){const[{x:n,y:i},o]=W(()=>({x:0,y:0})),c=pt(({down:p,offset:[h,k]})=>o.start({x:h,y:k,immediate:p})),l={Web:r(wt,{urlsAtom:e}),Win32:r(_t,{editorData:t}),Options:r(kt,{editorData:t}),Fields:r(Tt,{editorData:t})},f=Object.keys(l),u=Object.values(l),a=b.exports.useState(ae(0))[0];return d(F.div,{style:{x:n,y:i},className:"w-[460px] h-[640px] grid grid-rows-[minmax(0,1fr),auto]  bg-gray-200 rounded overflow-hidden",children:[r(At,{pageNames:f,stateIndicator:r(Ot,{urlsAtom:e}),dialogContentBody:r(It,{pageComponents:u,selectedTabAtom:a}),selectedTabAtom:a,dragBind:c}),s]})}function Mt(s,e){const t=I(s.fileUsAtom),{web_ourl:n="",web_murl:i="",web_qurl:o=""}=t.meta?.[s.formIdx]?.mani?.detection||{},c={o:n,m:i,q:o};return ke({...c,initial:c,dirtyAtom:ae(!1)},e)}function Ut({editorData:s,setShow:e=t=>{}}){const t=b.exports.useCallback(({nextValue:i})=>{console.log("urls updated",i)},[]),n=b.exports.useState(Mt(s,t))[0];return r(Dt,{urlsAtom:n,editorData:s,footer:d("div",{className:"px-4 py-4 bg-white flex items-center justify-between",children:[r(Ct,{editorData:s}),r(Et,{setShow:e})]})})}export{At as EditorTabs,Ut as default};
