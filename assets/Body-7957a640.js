import{k as e,v as b,r as d,M as o,B as k,C as S,u as w,t as O,R as M,a6 as I,l as U}from"./vendor-426d6524.js";import{U as N,c as R,O as g,a as y,f as T,M as A,I as D,b as q,d as W,S as E}from"./index-2820218a.js";import"./radix-ui-d5ed949e.js";import"./rare-e01cff55.js";function v({label:s,groupName:a,value:t,checked:i,...n}){return e.jsxs("label",{className:"h-6 flex items-center space-x-1.5",...n,children:[e.jsx("input",{className:"w-3 h-3 checked:bg-gray-400 focus:ring-indigo-500 focus:ring-offset-0",type:"radio",value:t,defaultChecked:i,...a&&{name:a}}),e.jsx("div",{children:s})]})}function _({value:s,setValue:a}){return e.jsxs("div",{className:"px-3 py-2 max-w-max flex flex-col space-y-1 border border-gray-300 rounded",onChange:t=>a(+t.target.value),children:[e.jsx(g,{trigger:e.jsx(v,{groupName:"how",value:0,checked:s===0,label:"Same as original url"}),...y(),children:e.jsx("div",{className:"text-xs",children:"Same as original url"})}),e.jsx(g,{trigger:e.jsx(v,{groupName:"how",value:1,checked:s===1,label:"Match only domain of original url"}),...y(),children:e.jsx("div",{className:"text-xs",children:"Match only domain of original url"})}),e.jsx(g,{trigger:e.jsx(v,{groupName:"how",value:2,checked:s===2,label:"Wildcard match"}),...y(),children:e.jsx("div",{className:"text-xs",children:"Wildcard match"})}),e.jsx(g,{trigger:e.jsx(v,{groupName:"how",value:3,checked:s===3,label:"Regular expresssion"}),...y(),children:e.jsx("div",{className:"text-xs",children:"Regular expresssion"})}),e.jsx(g,{trigger:e.jsx(v,{groupName:"how",value:4,checked:s===4,label:"No domain match"}),...y(),children:e.jsx("div",{className:"text-xs",children:"Exclude this login from domain match"})})]})}function B(s){return["Original url","Match only domain of original url","Wildcard string","Regular expresssion",e.jsxs(e.Fragment,{children:["Match original url ",e.jsx("span",{className:"text-xs",children:"(url params will be ignored)"})]})][s]||"No way"}function P({urlsAtom:s,initialMD:a}){const[t,i]=w(s),n=O(t.dirtyAtom),[r,h]=M.useState(a);d.useEffect(()=>{h(o.getMatchRawData(t.m))},[t.m]),d.useEffect(()=>{if(r.style===o.Style.undef){const l={...t,m:t.o};i(l),n(j(l))}},[t.o]);const[x,u]=d.useState(""),m=r.style===o.Style.undef;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(_,{value:r.style,setValue:l=>{const f={...t,m:o.makeRawMatchData({...r,style:l},t.o)};i(f),n(j(f))}}),!!a.opt&&e.jsxs("div",{children:[e.jsxs("label",{className:"mt-1 h-6 flex items-center space-x-1",children:[e.jsx("input",{type:"checkbox",className:"rounded focus:ring-indigo-500 focus:ring-offset-0",checked:(r.opt&o.Options.caseinsensitive)!==0,onChange:l=>{let f=l.target.checked?r.opt|o.Options.caseinsensitive:r.opt&~o.Options.caseinsensitive;const p={...t,m:o.makeRawMatchData({...r,opt:f},t.o)};i(p),n(j(p))}}),e.jsx("div",{children:"Case sensitive"})]}),e.jsxs("label",{className:"mt-1 h-6 flex items-center space-x-1",children:[e.jsx("input",{type:"checkbox",className:"rounded focus:ring-indigo-500 focus:ring-offset-0",checked:(r.opt&o.Options.matchtext)!==0,onChange:l=>{let f=l.target.checked?r.opt|o.Options.matchtext:r.opt&~o.Options.matchtext;const p={...t,m:o.makeRawMatchData({...r,opt:f},t.o)};i(p),n(j(p))}}),e.jsx("div",{children:"Match text"})]}),e.jsxs("label",{className:"mt-1 h-6 flex items-center space-x-1",children:[e.jsx("input",{type:"checkbox",className:"rounded focus:ring-indigo-500 focus:ring-offset-0",checked:(r.opt&o.Options.usequery)!==0,onChange:l=>{let f=l.target.checked?r.opt|o.Options.usequery:r.opt&~o.Options.usequery;const p={...t,m:o.makeRawMatchData({...r,opt:f},t.o)};i(p),n(j(p))}}),e.jsx("div",{children:"Use url query params"})]})]})]}),e.jsx("div",{className:`mt-1 mb-1 ${m?"opacity-50":""}`,children:B(r.style)}),e.jsx("input",{className:R("px-2 py-1.5 w-full border rounded shadow-inner",x?"border-red-400":"border-gray-400",m?"opacity-50":""),...x&&{title:x},disabled:m,spellCheck:!1,value:r.url,title:t.m,onChange:l=>i({...t,m:o.makeRawMatchData({...r,url:l.target.value},t.o)})}),e.jsxs("div",{className:"mt-3 px-2 pt-2 text-[.65rem] bg-yellow-100 border border-yellow-400 rounded-sm cursor-default",title:"This is how url will be stored",children:[e.jsx("div",{className:"-mt-4 ",children:e.jsx("span",{className:"px-1 bg-yellow-200 border border-yellow-500 rounded-sm select-none",children:"Final raw format"})}),e.jsx("div",{className:"overflow-x-auto break-all",children:t.m})]})]})}function G({urlsAtom:s}){const a=b(s),[t,i]=d.useState(a.o!==a.m),[n]=d.useState(o.getMatchRawData(a.m)),r=k({height:t?"auto":0,opacity:t?1:0,config:{duration:200}});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-6 mb-1 flex items-center",children:[e.jsxs("div",{className:"w-28 font-bold text-gray-600 flex items-center space-x-1",onClick:()=>i(!t),children:[e.jsx("div",{className:"",children:"Matching url"}),e.jsx(N,{double:!0,isUp:t,className:"w-5 h-5 border rounded"})]}),a.o===a.m&&e.jsx("label",{className:"flex items-center text-xs",children:e.jsx("div",{className:"ml-5",children:"same as original url"})})]}),t&&e.jsx(S.div,{style:r,children:e.jsx(P,{urlsAtom:s,initialMD:n})})]})}function $({urlsAtom:s}){const[a,t]=w(s),i=O(a.dirtyAtom);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-1 font-bold text-gray-600",children:"Original url"}),e.jsx("input",{className:"px-2 py-1.5 w-full border border-gray-400 rounded shadow-inner",spellCheck:!1,value:a.o,onChange:n=>{const r={...a,o:n.target.value};t(r),i(j(r))}})]})}function H({urlsAtom:s}){const[a,t]=w(s),i=O(a.dirtyAtom),[n,r]=d.useState(!1),h=k({height:n?"auto":0,opacity:n?1:0,config:{duration:200}});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-6 mb-1 flex items-center",children:[e.jsxs("div",{className:"w-28 font-bold text-gray-600 flex items-center space-x-1",onClick:()=>r(!n),children:[e.jsx("div",{className:"",children:"Quicklink url"}),e.jsx(N,{double:!0,isUp:n,className:"w-5 h-5 border rounded"})]}),a.o===a.q&&e.jsx("label",{className:"flex items-center text-xs",children:e.jsx("div",{className:"ml-5",children:"same as original url"})})]}),n&&e.jsx(S.div,{style:h,children:e.jsx("input",{className:"px-2 py-1.5 w-full border border-gray-400 rounded shadow-inner",spellCheck:!1,value:a.q,onChange:x=>{const u={...a,q:x.target.value};t(u),i(j(u))}})})]})}function j(s){return s.m!==s.initial.m||s.o!==s.initial.o||s.q!==s.initial.q}function Q({urlsAtom:s}){return e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-1",children:[e.jsx($,{urlsAtom:s})," ",e.jsx(G,{urlsAtom:s}),e.jsx(H,{urlsAtom:s})]})})}function z({editorData:s}){return e.jsx("div",{className:"p-4",children:"Windows match is comming soon..."})}function c(){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-1 mb-1 font-bold text-gray-600",children:"Quicklink name"}),e.jsx("input",{className:"px-2 py-1.5 w-full border border-gray-400 rounded shadow-inner",spellCheck:!1,value:"",readOnly:!0})]})}function L({editorData:s}){const[a,t]=d.useState(!1),[i,n]=d.useState(!1);return e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"mb-1 font-bold text-gray-600",children:"Choice name"}),e.jsx("input",{className:"px-2 py-1.5 w-full border border-gray-400 rounded shadow-inner",spellCheck:!1,value:"",readOnly:!0}),e.jsxs("label",{className:"mt-4 h-6 flex items-center space-x-1",children:[e.jsx("input",{type:"checkbox",className:"rounded focus:ring-indigo-500 focus:ring-offset-0",checked:!0,onChange:r=>{}}),e.jsx("div",{children:"Show in quicklinks list"})]}),e.jsx("div",{className:"mt-1 mb-1 font-bold text-gray-600",children:"Quicklink name"}),e.jsx("input",{className:"px-2 py-1.5 w-full border border-gray-400 rounded shadow-inner",spellCheck:!1,value:"",readOnly:!0}),e.jsxs("div",{className:"mt-4 w-28 font-bold text-gray-600 flex items-center space-x-1",onClick:()=>t(!a),children:[e.jsx("div",{className:"",children:"Group 1"}),e.jsx(N,{double:!0,isUp:a,className:"w-5 h-5 border rounded"})]}),a&&e.jsxs(e.Fragment,{children:[e.jsx(c,{}),e.jsx(c,{}),e.jsx(c,{}),e.jsx(c,{}),e.jsx(c,{}),e.jsx(c,{})]}),e.jsxs("div",{className:"mt-4 w-28 font-bold text-gray-600 flex items-center space-x-1",onClick:()=>n(!i),children:[e.jsx("div",{className:"",children:"Group 2"}),e.jsx(N,{double:!0,isUp:i,className:"w-5 h-5 border rounded"})]}),i&&e.jsxs(e.Fragment,{children:[e.jsx(c,{}),e.jsx(c,{}),e.jsx(c,{}),e.jsx(c,{}),e.jsx(c,{}),e.jsx(c,{})]})]})}function V({editorData:s}){return e.jsx("div",{className:"p-4",children:"Windows form script fields editor is comming soon..."})}function K({editorData:s}){const[a,t]=w(s.fileUsAtom),i=a.meta?.[s.formIdx]?.disp.isScript,[n,r]=M.useState(!1);return e.jsx(e.Fragment,{children:i?e.jsx(V,{editorData:s}):e.jsxs("div",{className:"p-4",children:["Web form fields editor is comming soon...",e.jsxs("div",{className:"mt-4 w-28 font-bold text-gray-600 flex items-center space-x-1",onClick:()=>r(!n),children:[e.jsx("div",{className:"",children:"Policy"}),e.jsx(N,{double:!0,isUp:n,className:"w-5 h-5 border rounded"})]}),n&&e.jsxs(e.Fragment,{children:[e.jsx(c,{}),e.jsx(c,{}),e.jsx(c,{}),e.jsx(c,{}),e.jsx(c,{}),e.jsx(c,{})]})]})})}function J({tabs:s,active:a,setActive:t}){const i=d.useRef(null),n=d.useRef(null),r=d.useRef(s.map(M.createRef)),[h,x]=k(()=>({x:0,y:0,width:0,height:0,config:{mass:.3,tension:280,friction:14}}));return d.useEffect(()=>{function u(){const m=i.current?.getBoundingClientRect(),l=r.current[a].current;if(m&&l){const{top:f,left:p,width:C,height:F}=l.getBoundingClientRect();x.start({x:p-m.x,y:f-m.y,width:C,height:F})}}u()},[a,i.current,n.current,r.current]),e.jsxs("div",{ref:i,className:"relative flex",children:[e.jsx(S.div,{ref:n,style:{...h,filter:"drop-shadow(#0003 0px 0px .05rem)"},className:"absolute bg-gray-50 rounded border border-gray-900/50 z-[1] shadow"}),e.jsx("div",{className:"flex justify-items-start space-x-1",children:s.map((u,m)=>e.jsx("button",{ref:r.current[m],className:R("px-4 py-2.5 leading-5 text-sm font-medium text-gray-700 rounded focus:outline-none z-10",a===m?"":"text-gray-700/80 hover:bg-white/[0.2] hover:text-white/75"),style:{filter:"drop-shadow(#0005 0px 0px .1rem)"},onClick:()=>t(m),children:u},u))})]})}function X({urlsAtom:s}){const a=b(s),t=b(a.dirtyAtom);return e.jsx(e.Fragment,{children:t&&e.jsx(E,{className:"self-end w-4 h-4 text-[#f6673b]",fill:"#ffad42",style:{filter:"drop-shadow(#f66b3b7a 0px 0px 0.15rem)"},title:"Modified"})})}function Y({editorData:s}){const a=b(s.fileUsAtom),t=a.stats,i=`${T(s.formIdx)}`,n=A({fname:a.fname,classLg:"px-1 text-[.65rem] font-bold text-gray-600 opacity-100"});return e.jsx(g,{trigger:e.jsx(D,{className:"w-7 h-7 text-gray-300",style:{filter:"drop-shadow(#907bdab0 0px 0px .2rem)"},fill:"#fff",stroke:"#0004",strokeWidth:1}),arrow:!0,children:e.jsxs("div",{className:"text-xs grid grid-cols-[auto,1fr] gap-x-2",children:[e.jsx("div",{className:"font-bold",children:"Form"}),e.jsx("div",{children:i}),t.domain&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-bold",children:"Domain"}),e.jsx("div",{children:t.domain})]}),e.jsx("div",{className:"font-bold",children:"Filename"}),e.jsx("div",{children:n}),t.dateCreated&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-bold",children:"Created"}),e.jsx("div",{children:t.dateCreated})]}),t.dateModified&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-bold",children:"Modified"}),e.jsx("div",{children:t.dateModified})]})]})})}function Z({setShow:s}){return e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"px-4 py-2 min-w-[6rem] h-9 leading-4 text-gray-900 bg-gray-200 border border-gray-500 rounded shadow active:scale-[.97]",onClick:()=>{s(!1)},children:"OK"}),e.jsx("button",{className:"px-4 py-2 min-w-[6rem] h-9 leading-4 text-gray-900 bg-gray-200 border border-gray-500 rounded shadow active:scale-[.97]",onClick:()=>{s(!1)},children:"Cancel"})]})}function ee({pageComponents:s,selectedTabAtom:a}){const t=b(a);return e.jsx(e.Fragment,{children:s.map((i,n)=>e.jsx("div",{className:R(t!==n&&"hidden"),children:i},n))})}function se({pageNames:s,stateIndicator:a,dialogContentBody:t,selectedTabAtom:i,dragBind:n}){const[r,h]=w(i),x=d.useRef(),u=d.useRef(Array(s.length).fill(0));d.useLayoutEffect(()=>{x.current&&(x.current.scrollTop=u.current[r])},[r]);function m(l){u.current[r]=x.current?.scrollTop||0,h(l)}return e.jsxs("div",{className:"grid grid-rows-[auto,minmax(0,1fr)]",children:[e.jsxs("div",{className:"px-4 pt-4 pb-2 bg-blue-900/20 flex items-center justify-between touch-none",...n(),children:[e.jsx(J,{tabs:s,active:r,setActive:m}),a]}),e.jsx("div",{className:"text-sm bg-white",children:e.jsx(q,{className:"text-gray-500 overflow-auto w-full h-full",scrollableNodeProps:{ref:x},autoHide:!1,children:t})})]})}function te({footer:s,urlsAtom:a,editorData:t}){const[{x:i,y:n},r]=k(()=>({x:0,y:0})),h=I(({down:f,offset:[p,C]})=>r.start({x:p,y:C,immediate:f})),x={Web:e.jsx(Q,{urlsAtom:a}),Win32:e.jsx(z,{editorData:t}),Options:e.jsx(L,{editorData:t}),Fields:e.jsx(K,{editorData:t})},u=Object.keys(x),m=Object.values(x),l=d.useState(U(0))[0];return e.jsxs(S.div,{style:{x:i,y:n},className:"w-[460px] h-[640px] grid grid-rows-[minmax(0,1fr),auto]  bg-gray-200 rounded overflow-hidden",children:[e.jsx(se,{pageNames:u,stateIndicator:e.jsx(X,{urlsAtom:a}),dialogContentBody:e.jsx(ee,{pageComponents:m,selectedTabAtom:l}),selectedTabAtom:l,dragBind:h}),s]})}function ae(s,a){const t=b(s.fileUsAtom),{web_ourl:i="",web_murl:n="",web_qurl:r=""}=t.meta?.[s.formIdx]?.mani?.detection||{},h={o:i,m:n,q:r};return W({...h,initial:h,dirtyAtom:U(!1)},a)}function oe({editorData:s,setShow:a=t=>{}}){const t=d.useCallback(({nextValue:n})=>{console.log("urls updated",n)},[]),i=d.useState(ae(s,t))[0];return e.jsx(te,{urlsAtom:i,editorData:s,footer:e.jsxs("div",{className:"px-4 py-4 bg-white flex items-center justify-between",children:[e.jsx(Y,{editorData:s}),e.jsx(Z,{setShow:a})]})})}export{se as EditorTabs,oe as default};
