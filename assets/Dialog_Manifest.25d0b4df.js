import{C as I,j as n,b as d,v as M,w as b,G as V,F as w,H as W,t as F,u as Y,a as be}from"./vendor.8577ac70.js";import{M as g,U as P,c as z,a as C,o as A,b as ve,f as xe,d as we,I as _e,e as ke,g as Se}from"./index.d52d46ad.js";function Ne(s,e,t){return Math.max(e,Math.min(s,t))}const v={toVector(s,e){return s===void 0&&(s=e),Array.isArray(s)?s:[s,s]},add(s,e){return[s[0]+e[0],s[1]+e[1]]},sub(s,e){return[s[0]-e[0],s[1]-e[1]]},addTo(s,e){s[0]+=e[0],s[1]+=e[1]},subTo(s,e){s[0]-=e[0],s[1]-=e[1]}};function X(s,e,t){return e===0||Math.abs(e)===1/0?Math.pow(s,t*5):s*e*t/(e+t*s)}function Q(s,e,t,i=.15){return i===0?Ne(s,e,t):s<e?-X(e-s,t-e,i)+e:s>t?+X(s-t,t-e,i)+t:s}function Te(s,[e,t],[i,r]){const[[o,c],[l,u]]=s;return[Q(e,o,c,i),Q(t,l,u,r)]}function x(s,e,t){return e in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function J(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(s,r).enumerable})),t.push.apply(t,i)}return t}function m(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?J(Object(t),!0).forEach(function(i){x(s,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):J(Object(t)).forEach(function(i){Object.defineProperty(s,i,Object.getOwnPropertyDescriptor(t,i))})}return s}const ae={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function Z(s){return s?s[0].toUpperCase()+s.slice(1):""}const Oe=["enter","leave"];function Ee(s=!1,e){return s&&!Oe.includes(e)}function Ce(s,e="",t=!1){const i=ae[s],r=i&&i[e]||e;return"on"+Z(s)+Z(r)+(Ee(t,r)?"Capture":"")}const Ie=["gotpointercapture","lostpointercapture"];function Ae(s){let e=s.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const i=Ie.includes(e)?"capturecapture":"capture",r=!!~e.indexOf(i);return r&&(e=e.replace("capture","")),{device:e,capture:r,passive:t}}function De(s,e=""){const t=ae[s],i=t&&t[e]||e;return s+i}function q(s){return"touches"in s}function ce(s){return q(s)?"touch":"pointerType"in s?s.pointerType:"mouse"}function Me(s){return Array.from(s.touches).filter(e=>{var t,i;return e.target===s.currentTarget||((t=s.currentTarget)===null||t===void 0||(i=t.contains)===null||i===void 0?void 0:i.call(t,e.target))})}function Pe(s){return s.type==="touchend"||s.type==="touchcancel"?s.changedTouches:s.targetTouches}function le(s){return q(s)?Pe(s)[0]:s}function Re(s){return Me(s).map(e=>e.identifier)}function H(s){const e=le(s);return q(s)?e.identifier:e.pointerId}function ee(s){const e=le(s);return[e.clientX,e.clientY]}function Le(s){const e={};if("buttons"in s&&(e.buttons=s.buttons),"shiftKey"in s){const{shiftKey:t,altKey:i,metaKey:r,ctrlKey:o}=s;Object.assign(e,{shiftKey:t,altKey:i,metaKey:r,ctrlKey:o})}return e}function K(s,...e){return typeof s=="function"?s(...e):s}function Ue(){}function je(...s){return s.length===0?Ue:s.length===1?s[0]:function(){let e;for(const t of s)e=t.apply(this,arguments)||e;return e}}function te(s,e){return Object.assign({},e,s||{})}const Be=32;class Ke{constructor(e,t,i){this.ctrl=e,this.args=t,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:i,args:r}=this;t[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,i=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=i.from?K(i.from,t):t.offset,t.offset=t.lastOffset),t.startTime=t.timeStamp=e.timeStamp}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:i,shared:r}=this;t.args=this.args;let o=0;if(e&&(t.event=e,i.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,Le(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,o=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const N=t._delta.map(Math.abs);v.addTo(t._distance,N)}this.axisIntent&&this.axisIntent(e);const[c,l]=t._movement,[u,f]=i.threshold,{_step:a,values:p}=t;if(i.hasCustomTransform?(a[0]===!1&&(a[0]=Math.abs(c)>=u&&p[0]),a[1]===!1&&(a[1]=Math.abs(l)>=f&&p[1])):(a[0]===!1&&(a[0]=Math.abs(c)>=u&&Math.sign(c)*u),a[1]===!1&&(a[1]=Math.abs(l)>=f&&Math.sign(l)*f)),t.intentional=a[0]!==!1||a[1]!==!1,!t.intentional)return;const h=[0,0];if(i.hasCustomTransform){const[N,ye]=p;h[0]=a[0]!==!1?N-a[0]:0,h[1]=a[1]!==!1?ye-a[1]:0}else h[0]=a[0]!==!1?c-a[0]:0,h[1]=a[1]!==!1?l-a[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(h);const k=t.offset,S=t._active&&!t._blocked||t.active;S&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in i&&(t._bounds=K(i.bounds,t)),this.setup&&this.setup()),t.movement=h,this.computeOffset()));const[O,U]=t.offset,[[G,he],[pe,me]]=t._bounds;t.overflow=[O<G?-1:O>he?1:0,U<pe?-1:U>me?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const ge=t._active?i.rubberband||[0,0]:[0,0];if(t.offset=Te(t._bounds,t.offset,ge),t.delta=v.sub(t.offset,k),this.computeMovement(),S&&(!t.last||o>Be)){t.delta=v.sub(t.offset,k);const N=t.delta.map(Math.abs);v.addTo(t.distance,N),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&o>0&&(t.velocity=[N[0]/o,N[1]/o])}}emit(){const e=this.state,t=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const r=this.handler(m(m(m({},t),e),{},{[this.aliasKey]:e.values}));r!==void 0&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function Ve([s,e],t){const i=Math.abs(s),r=Math.abs(e);if(i>r&&i>t)return"x";if(r>i&&r>t)return"y"}class We extends Ke{constructor(...e){super(...e),x(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=v.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=v.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,i=this.config;if(!t.axis&&e){const r=typeof i.axisThreshold=="object"?i.axisThreshold[ce(e)]:i.axisThreshold;t.axis=Ve(t._movement,r)}t._blocked=(i.lockDirection||!!i.axis)&&!t.axis||!!i.axis&&i.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const Fe=s=>s,se=.15,de={enabled(s=!0){return s},eventOptions(s,e,t){return m(m({},t.shared.eventOptions),s)},preventDefault(s=!1){return s},triggerAllEvents(s=!1){return s},rubberband(s=0){switch(s){case!0:return[se,se];case!1:return[0,0];default:return v.toVector(s)}},from(s){if(typeof s=="function")return s;if(s!=null)return v.toVector(s)},transform(s,e,t){const i=s||t.shared.transform;return this.hasCustomTransform=!!i,i||Fe},threshold(s){return v.toVector(s,0)}},qe=0,R=m(m({},de),{},{axis(s,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(s=qe){return s},bounds(s={}){if(typeof s=="function")return o=>R.bounds(s(o));if("current"in s)return()=>s.current;if(typeof HTMLElement=="function"&&s instanceof HTMLElement)return s;const{left:e=-1/0,right:t=1/0,top:i=-1/0,bottom:r=1/0}=s;return[[e,t],[i,r]]}}),j=10,ie={ArrowRight:(s=1)=>[j*s,0],ArrowLeft:(s=1)=>[-j*s,0],ArrowUp:(s=1)=>[0,-j*s],ArrowDown:(s=1)=>[0,j*s]};class Ge extends We{constructor(...e){super(...e),x(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),r={left:t.left-i.left+e.offset[0],right:t.right-i.right+e.offset[0],top:t.top-i.top+e.offset[1],bottom:t.bottom-i.bottom+e.offset[1]};e._bounds=R.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(r&&r.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=H(e),i._pointerActive=!0,this.computeValues(ee(e)),this.computeInitial(),t.preventScrollAxis&&ce(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,i=this.config;if(!t._pointerActive||t.type===e.type&&e.timeStamp===t.timeStamp)return;const r=H(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;const o=ee(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=v.sub(o,t._values),this.computeValues(o)),v.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,i=this.config;if(!t._active||!t._pointerActive)return;const r=H(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[o,c]=t._distance;if(t.tap=o<=i.tapsThreshold&&c<=i.tapsThreshold,t.tap&&i.filterTaps)t._force=!0;else{const[l,u]=t.direction,[f,a]=t.velocity,[p,h]=t.movement,[k,S]=i.swipe.velocity,[O,U]=i.swipe.distance,G=i.swipe.duration;t.elapsedTime<G&&(Math.abs(f)>k&&Math.abs(p)>O&&(t.swipe[0]=l),Math.abs(a)>S&&Math.abs(h)>U&&(t.swipe[1]=u))}this.emit()}pointerClick(e){this.state.tap||(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,i=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,He(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=ie[e.key];if(t){const i=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=t(r),i._keyboardActive=!0,v.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in ie&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function He(s){"persist"in s&&typeof s.persist=="function"&&s.persist()}const L=typeof window<"u"&&window.document&&window.document.createElement;function $e(){return L&&"ontouchstart"in window}function re(){return $e()||L&&window.navigator.maxTouchPoints>1}function Ye(){return L&&"onpointerdown"in window}function ze(){return L&&"exitPointerLock"in window.document}function Xe(){try{return"constructor"in GestureEvent}catch{return!1}}const _={isBrowser:L,gesture:Xe(),touch:re(),touchscreen:re(),pointer:Ye(),pointerLock:ze()},Qe=250,Je=180,Ze=.5,et=50,tt=250,ne={mouse:0,touch:0,pen:8},st=m(m({},R),{},{device(s,e,{pointer:{touch:t=!1,lock:i=!1,mouse:r=!1}={}}){return this.pointerLock=i&&_.pointerLock,_.touch&&t?"touch":this.pointerLock?"mouse":_.pointer&&!r?"pointer":_.touch?"touch":"mouse"},preventScrollAxis(s,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&s?Qe:void 0,!(!_.touchscreen||t===!1))return s||(t!==void 0?"y":void 0)},pointerCapture(s,e,{pointer:{capture:t=!0,buttons:i=1}={}}){return this.pointerButtons=i,!this.pointerLock&&this.device==="pointer"&&t},keys(s=!0){return s},threshold(s,e,{filterTaps:t=!1,tapsThreshold:i=3,axis:r=void 0}){const o=v.toVector(s,t?i:r?1:0);return this.filterTaps=t,this.tapsThreshold=i,o},swipe({velocity:s=Ze,distance:e=et,duration:t=tt}={}){return{velocity:this.transform(v.toVector(s)),distance:this.transform(v.toVector(e)),duration:t}},delay(s=0){switch(s){case!0:return Je;case!1:return 0;default:return s}},axisThreshold(s){return s?m(m({},ne),s):ne}});m(m({},de),{},{device(s,e,{shared:t,pointer:{touch:i=!1}={}}){if(t.target&&!_.touch&&_.gesture)return"gesture";if(_.touch&&i)return"touch";if(_.touchscreen){if(_.pointer)return"pointer";if(_.touch)return"touch"}},bounds(s,e,{scaleBounds:t={},angleBounds:i={}}){const r=c=>{const l=te(K(t,c),{min:-1/0,max:1/0});return[l.min,l.max]},o=c=>{const l=te(K(i,c),{min:-1/0,max:1/0});return[l.min,l.max]};return typeof t!="function"&&typeof i!="function"?[r(),o()]:c=>[r(c),o(c)]},threshold(s,e,t){return this.lockDirection=t.axis==="lock",v.toVector(s,this.lockDirection?[.1,3]:0)},modifierKey(s){return s===void 0?"ctrlKey":s}});m(m({},R),{},{mouseOnly:(s=!0)=>s});m(m({},R),{},{mouseOnly:(s=!0)=>s});const ue=new Map,$=new Map;function it(s){ue.set(s.key,s.engine),$.set(s.key,s.resolver)}const rt={key:"drag",engine:Ge,resolver:st};function nt(s,e){if(s==null)return{};var t={},i=Object.keys(s),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(t[r]=s[r]);return t}function ot(s,e){if(s==null)return{};var t=nt(s,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(s);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&(!Object.prototype.propertyIsEnumerable.call(s,i)||(t[i]=s[i]))}return t}const at={target(s){if(s)return()=>"current"in s?s.current:s},enabled(s=!0){return s},window(s=_.isBrowser?window:void 0){return s},eventOptions({passive:s=!0,capture:e=!1}={}){return{passive:s,capture:e}},transform(s){return s}},ct=["target","eventOptions","window","enabled","transform"];function B(s={},e){const t={};for(const[i,r]of Object.entries(e))switch(typeof r){case"function":t[i]=r.call(t,s[i],i,s);break;case"object":t[i]=B(s[i],r);break;case"boolean":r&&(t[i]=s[i]);break}return t}function lt(s,e){const t=s,{target:i,eventOptions:r,window:o,enabled:c,transform:l}=t,u=ot(t,ct),f={shared:B({target:i,eventOptions:r,window:o,enabled:c,transform:l},at)};if(e){const a=$.get(e);f[e]=B(m({shared:f.shared},u),a)}else for(const a in u){const p=$.get(a);p&&(f[a]=B(m({shared:f.shared},u[a]),p))}return f}class fe{constructor(e,t){x(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,i,r,o){const c=this._listeners,l=De(t,i),u=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},f=m(m({},u),o);e.addEventListener(l,r,f);const a=()=>{e.removeEventListener(l,r,f),c.delete(a)};return c.add(a),a}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class dt{constructor(){x(this,"_timeouts",new Map)}add(e,t,i=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(t,i,...r))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class ut{constructor(e){x(this,"gestures",new Set),x(this,"_targetEventStore",new fe(this)),x(this,"gestureEventStores",{}),x(this,"gestureTimeoutStores",{}),x(this,"handlers",{}),x(this,"config",{}),x(this,"pointerIds",new Set),x(this,"touchIds",new Set),x(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),ft(this,e)}setEventIds(e){if(q(e))return this.touchIds=new Set(Re(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=lt(e,t)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,i={};let r;if(!(t.target&&(r=t.target(),!r))){if(t.enabled){for(const c of this.gestures){const l=this.config[c],u=oe(i,l.eventOptions,!!r);if(l.enabled){const f=ue.get(c);new f(this,e,c).bind(u)}}const o=oe(i,t.eventOptions,!!r);for(const c in this.nativeHandlers)o(c,"",l=>this.nativeHandlers[c](m(m({},this.state.shared),{},{event:l,args:e})),void 0,!0)}for(const o in i)i[o]=je(...i[o]);if(!r)return i;for(const o in i){const{device:c,capture:l,passive:u}=Ae(o);this._targetEventStore.add(r,c,"",i[o],{capture:l,passive:u})}}}}function E(s,e){s.gestures.add(e),s.gestureEventStores[e]=new fe(s,e),s.gestureTimeoutStores[e]=new dt}function ft(s,e){e.drag&&E(s,"drag"),e.wheel&&E(s,"wheel"),e.scroll&&E(s,"scroll"),e.move&&E(s,"move"),e.pinch&&E(s,"pinch"),e.hover&&E(s,"hover")}const oe=(s,e,t)=>(i,r,o,c={},l=!1)=>{var u,f;const a=(u=c.capture)!==null&&u!==void 0?u:e.capture,p=(f=c.passive)!==null&&f!==void 0?f:e.passive;let h=l?i:Ce(i,r,a);t&&p&&(h+="Passive"),s[h]=s[h]||[],s[h].push(o)};function ht(s,e={},t,i){const r=I.useMemo(()=>new ut(s),[]);if(r.applyHandlers(s,i),r.applyConfig(e,t),I.useEffect(r.effect.bind(r)),I.useEffect(()=>r.clean.bind(r),[]),e.target===void 0)return r.bind.bind(r)}function pt(s,e){return it(rt),ht({drag:s},e||{},"drag")}function mt({editorData:s}){return n("div",{className:"p-4",children:"Windows match is comming soon..."})}function D({label:s,groupName:e,value:t,checked:i,...r}){return d("label",{className:"h-6 flex items-center space-x-1.5",...r,children:[n("input",{className:"w-3 h-3 checked:bg-gray-400 focus:ring-indigo-500 focus:ring-offset-0",type:"radio",value:t,defaultChecked:i,...e&&{name:e}}),n("div",{children:s})]})}function gt({value:s,setValue:e}){return d("div",{className:"px-3 py-2 max-w-max flex flex-col space-y-1 border border-gray-300 rounded",onChange:t=>e(+t.target.value),children:[n(C,{trigger:n(D,{groupName:"how",value:0,checked:s===0,label:"Same as original url"}),...A(),children:n("div",{className:"text-xs",children:"Same as original url"})}),n(C,{trigger:n(D,{groupName:"how",value:1,checked:s===1,label:"Match only domain of original url"}),...A(),children:n("div",{className:"text-xs",children:"Match only domain of original url"})}),n(C,{trigger:n(D,{groupName:"how",value:2,checked:s===2,label:"Wildcard match"}),...A(),children:n("div",{className:"text-xs",children:"Wildcard match"})}),n(C,{trigger:n(D,{groupName:"how",value:3,checked:s===3,label:"Regular expresssion"}),...A(),children:n("div",{className:"text-xs",children:"Regular expresssion"})}),n(C,{trigger:n(D,{groupName:"how",value:4,checked:s===4,label:"No domain match"}),...A(),children:n("div",{className:"text-xs",children:"Exclude this login from domain match"})})]})}function yt(s){return["Original url","Match only domain of original url","Wildcard string","Regular expresssion",d(w,{children:["Match original url ",n("span",{className:"text-xs",children:"(url params will be ignored)"})]})][s]||"No way"}function bt({urlsAtom:s,initialMD:e}){const[t,i]=F(s),r=Y(t.dirtyAtom),[o,c]=I.useState(e);b.exports.useEffect(()=>{c(g.getMatchRawData(t.m))},[t.m]),b.exports.useEffect(()=>{if(o.style===g.Style.undef){const a={...t,m:t.o};i(a),r(T(a))}},[t.o]);const[l,u]=b.exports.useState(""),f=o.style===g.Style.undef;return d(w,{children:[d("div",{className:"flex space-x-4",children:[n(gt,{value:o.style,setValue:a=>{const p={...t,m:g.makeRawMatchData({...o,style:a},t.o)};i(p),r(T(p))}}),!!e.opt&&d("div",{children:[d("label",{className:"mt-1 h-6 flex items-center space-x-1",children:[n("input",{type:"checkbox",className:"rounded focus:ring-indigo-500 focus:ring-offset-0",checked:(o.opt&g.Options.caseinsensitive)!==0,onChange:a=>{let p=a.target.checked?o.opt|g.Options.caseinsensitive:o.opt&~g.Options.caseinsensitive;const h={...t,m:g.makeRawMatchData({...o,opt:p},t.o)};i(h),r(T(h))}}),n("div",{children:"Case sensitive"})]}),d("label",{className:"mt-1 h-6 flex items-center space-x-1",children:[n("input",{type:"checkbox",className:"rounded focus:ring-indigo-500 focus:ring-offset-0",checked:(o.opt&g.Options.matchtext)!==0,onChange:a=>{let p=a.target.checked?o.opt|g.Options.matchtext:o.opt&~g.Options.matchtext;const h={...t,m:g.makeRawMatchData({...o,opt:p},t.o)};i(h),r(T(h))}}),n("div",{children:"Match text"})]}),d("label",{className:"mt-1 h-6 flex items-center space-x-1",children:[n("input",{type:"checkbox",className:"rounded focus:ring-indigo-500 focus:ring-offset-0",checked:(o.opt&g.Options.usequery)!==0,onChange:a=>{let p=a.target.checked?o.opt|g.Options.usequery:o.opt&~g.Options.usequery;const h={...t,m:g.makeRawMatchData({...o,opt:p},t.o)};i(h),r(T(h))}}),n("div",{children:"Use url query params"})]})]})]}),n("div",{className:`mt-1 mb-1 ${f?"opacity-50":""}`,children:yt(o.style)}),n("input",{className:z("px-2 py-1.5 w-full border rounded shadow-inner",l?"border-red-400":"border-gray-400",f?"opacity-50":""),...l&&{title:l},disabled:f,spellCheck:!1,value:o.url,title:t.m,onChange:a=>i({...t,m:g.makeRawMatchData({...o,url:a.target.value},t.o)})}),d("div",{className:"mt-3 px-2 pt-2 text-[.65rem] bg-yellow-100 border border-yellow-400 rounded-sm cursor-default",title:"This is how url will be stored",children:[n("div",{className:"-mt-4 ",children:n("span",{className:"px-1 bg-yellow-200 border border-yellow-500 rounded-sm select-none",children:"Final raw format"})}),n("div",{className:"overflow-x-auto break-all",children:t.m})]})]})}function vt({urlsAtom:s}){const e=M(s),[t,i]=b.exports.useState(e.o!==e.m),[r]=b.exports.useState(g.getMatchRawData(e.m)),o=V({height:t?"auto":0,opacity:t?1:0,config:{duration:200}});return d(w,{children:[d("div",{className:"mt-6 mb-1 flex items-center",children:[d("div",{className:"w-28 font-bold text-gray-600 flex items-center space-x-1",onClick:()=>i(!t),children:[n("div",{className:"",children:"Matching url"}),n(P,{double:!0,isUp:t,className:"w-5 h-5 border rounded"})]}),e.o===e.m&&n("label",{className:"flex items-center text-xs",children:n("div",{className:"ml-5",children:"same as original url"})})]}),t&&n(W.div,{style:o,children:n(bt,{urlsAtom:s,initialMD:r})})]})}function xt({urlsAtom:s}){const[e,t]=F(s),i=Y(e.dirtyAtom);return d(w,{children:[n("div",{className:"mb-1 font-bold text-gray-600",children:"Original url"}),n("input",{className:"px-2 py-1.5 w-full border border-gray-400 rounded shadow-inner",spellCheck:!1,value:e.o,onChange:r=>{const o={...e,o:r.target.value};t(o),i(T(o))}})]})}function wt({urlsAtom:s}){const[e,t]=F(s),i=Y(e.dirtyAtom),[r,o]=b.exports.useState(!1),c=V({height:r?"auto":0,opacity:r?1:0,config:{duration:200}});return d(w,{children:[d("div",{className:"mt-6 mb-1 flex items-center",children:[d("div",{className:"w-28 font-bold text-gray-600 flex items-center space-x-1",onClick:()=>o(!r),children:[n("div",{className:"",children:"Quicklink url"}),n(P,{double:!0,isUp:r,className:"w-5 h-5 border rounded"})]}),e.o===e.q&&n("label",{className:"flex items-center text-xs",children:n("div",{className:"ml-5",children:"same as original url"})})]}),r&&n(W.div,{style:c,children:n("input",{className:"px-2 py-1.5 w-full border border-gray-400 rounded shadow-inner",spellCheck:!1,value:e.q,onChange:l=>{const u={...e,q:l.target.value};t(u),i(T(u))}})})]})}function T(s){return s.m!==s.initial.m||s.o!==s.initial.o||s.q!==s.initial.q}function _t({urlsAtom:s}){return n("div",{className:"p-4",children:d("div",{className:"grid grid-cols-1",children:[n(xt,{urlsAtom:s})," ",n(vt,{urlsAtom:s}),n(wt,{urlsAtom:s})]})})}function y(){return d(w,{children:[n("div",{className:"mt-1 mb-1 font-bold text-gray-600",children:"Quicklink name"}),n("input",{className:"px-2 py-1.5 w-full border border-gray-400 rounded shadow-inner",spellCheck:!1,value:"",readOnly:!0})]})}function kt({editorData:s}){const[e,t]=b.exports.useState(!1),[i,r]=b.exports.useState(!1);return d("div",{className:"p-4",children:[n("div",{className:"mb-1 font-bold text-gray-600",children:"Choice name"}),n("input",{className:"px-2 py-1.5 w-full border border-gray-400 rounded shadow-inner",spellCheck:!1,value:"",readOnly:!0}),d("label",{className:"mt-4 h-6 flex items-center space-x-1",children:[n("input",{type:"checkbox",className:"rounded focus:ring-indigo-500 focus:ring-offset-0",checked:!0,onChange:o=>{}}),n("div",{children:"Show in quicklinks list"})]}),n("div",{className:"mt-1 mb-1 font-bold text-gray-600",children:"Quicklink name"}),n("input",{className:"px-2 py-1.5 w-full border border-gray-400 rounded shadow-inner",spellCheck:!1,value:"",readOnly:!0}),d("div",{className:"mt-4 w-28 font-bold text-gray-600 flex items-center space-x-1",onClick:()=>t(!e),children:[n("div",{className:"",children:"Group 1"}),n(P,{double:!0,isUp:e,className:"w-5 h-5 border rounded"})]}),e&&d(w,{children:[n(y,{}),n(y,{}),n(y,{}),n(y,{}),n(y,{}),n(y,{})]}),d("div",{className:"mt-4 w-28 font-bold text-gray-600 flex items-center space-x-1",onClick:()=>r(!i),children:[n("div",{className:"",children:"Group 2"}),n(P,{double:!0,isUp:i,className:"w-5 h-5 border rounded"})]}),i&&d(w,{children:[n(y,{}),n(y,{}),n(y,{}),n(y,{}),n(y,{}),n(y,{})]})]})}function St({editorData:s}){return n("div",{className:"p-4",children:"Windows form script fields editor is comming soon..."})}function Nt({editorData:s}){const[e,t]=F(s.fileUsAtom),i=e.meta?.[s.formIdx]?.disp.isScript,[r,o]=I.useState(!1);return n(w,{children:i?n(St,{editorData:s}):d("div",{className:"p-4",children:["Web form fields editor is comming soon...",d("div",{className:"mt-4 w-28 font-bold text-gray-600 flex items-center space-x-1",onClick:()=>o(!r),children:[n("div",{className:"",children:"Policy"}),n(P,{double:!0,isUp:r,className:"w-5 h-5 border rounded"})]}),r&&d(w,{children:[n(y,{}),n(y,{}),n(y,{}),n(y,{}),n(y,{}),n(y,{})]})]})})}function Tt({editorData:s}){const e=M(s.fileUsAtom),t=e.stats,i=`${xe(s.formIdx)}`,r=we({fname:e.fname,classLg:"px-1 text-[.65rem] font-bold text-gray-600 opacity-100"});return n(C,{trigger:n(_e,{className:"w-7 h-7 text-gray-300",style:{filter:"drop-shadow(#907bdab0 0px 0px .2rem)"},fill:"#fff",stroke:"#0004",strokeWidth:1}),arrow:!0,children:d("div",{className:"text-xs grid grid-cols-[auto,1fr] gap-x-2",children:[n("div",{className:"font-bold",children:"Form"}),n("div",{children:i}),t.domain&&d(w,{children:[n("div",{className:"font-bold",children:"Domain"}),n("div",{children:t.domain})]}),n("div",{className:"font-bold",children:"Filename"}),n("div",{children:r}),t.dateCreated&&d(w,{children:[n("div",{className:"font-bold",children:"Created"}),n("div",{children:t.dateCreated})]}),t.dateModified&&d(w,{children:[n("div",{className:"font-bold",children:"Modified"}),n("div",{children:t.dateModified})]})]})})}function Ot({urlsAtom:s}){const e=M(s),t=M(e.dirtyAtom);return n(w,{children:t&&n(ke,{className:"self-end w-4 h-4 text-[#f6673b]",fill:"#ffad42",style:{filter:"drop-shadow(#f66b3b7a 0px 0px 0.15rem)"},title:"Modified"})})}function Et({tabs:s,active:e,setActive:t}){const i=b.exports.useRef(null),r=b.exports.useRef(null),o=b.exports.useRef(s.map(I.createRef)),[c,l]=V(()=>({x:0,y:0,width:0,height:0,config:{mass:.3,tension:280,friction:14}}));return b.exports.useEffect(()=>{function u(){const f=i.current?.getBoundingClientRect(),a=o.current[e].current;if(f&&a){const{top:p,left:h,width:k,height:S}=a.getBoundingClientRect();l.start({x:h-f.x,y:p-f.y,width:k,height:S})}}u()},[e,i.current,r.current,o.current]),d("div",{ref:i,className:"relative flex",children:[n(W.div,{ref:r,style:{...c,filter:"drop-shadow(#0003 0px 0px .05rem)"},className:"absolute bg-gray-50 rounded border border-gray-900/50 z-[1] shadow"}),n("div",{className:"flex justify-items-start space-x-1",children:s.map((u,f)=>n("button",{ref:o.current[f],className:z("px-4 py-2.5 leading-5 text-sm font-medium text-gray-700 rounded focus:outline-none z-10",e===f?"":"text-gray-700/80 hover:bg-white/[0.2] hover:text-white/75"),style:{filter:"drop-shadow(#0005 0px 0px .1rem)"},onClick:()=>t(f),children:u},u))})]})}function Ct({pages:s,stateIndicator:e,dragBind:t}){const[i,r]=b.exports.useState(0),o=b.exports.useRef(),c=b.exports.useRef(Array(Object.keys(s).length).fill(0));return b.exports.useLayoutEffect(()=>{o.current&&(o.current.scrollTop=c.current[i])},[i]),d("div",{className:"grid grid-rows-[auto,minmax(0,1fr)]",children:[" ",d("div",{className:"px-4 pt-4 pb-2 bg-blue-900/20 flex items-center justify-between",...t(),style:{touchAction:"none"},children:[n("div",{className:"flex justify-items-start space-x-1",children:n(Et,{tabs:Object.keys(s),active:i,setActive:l=>{c.current[i]=o.current?.scrollTop||0,r(l)}})}),e]}),n("div",{className:"text-sm bg-white",children:n(Se,{className:"text-gray-500 overflow-auto w-full h-full",scrollableNodeProps:{ref:o},autoHide:!1,children:Object.values(s).map((l,u)=>n(b.exports.Fragment,{children:n("div",{className:`${i===u?"":"hidden"}`,children:l},u)},u))})})]})}function Dt({editorData:s,setShow:e=t=>{}}){const[{x:t,y:i},r]=V(()=>({x:0,y:0})),o=pt(({down:k,offset:[S,O]})=>r.start({x:S,y:O,immediate:k})),c=M(s.fileUsAtom),{web_ourl:l="",web_murl:u="",web_qurl:f=""}=c.meta?.[s.formIdx]?.mani?.detection||{},a={o:l,m:u,q:f},[p]=b.exports.useState(ve({...a,initial:a,dirtyAtom:be(!1)},({nextValue:k})=>{console.log("urls updated",k)})),h={Web:n(_t,{urlsAtom:p}),Win32:n(mt,{editorData:s}),Options:n(kt,{editorData:s}),Fields:n(Nt,{editorData:s})};return d(W.div,{style:{x:t,y:i},className:z("w-[460px] h-[640px] grid grid-rows-[minmax(0,1fr),auto]","bg-gray-200 rounded overflow-hidden"),children:[n(Ct,{pages:h,stateIndicator:n(Ot,{urlsAtom:p}),dragBind:o}),d("div",{className:"px-4 py-4 bg-white flex items-center justify-between",children:[n(Tt,{editorData:s}),d("div",{className:"flex space-x-2",children:[n("button",{className:"px-4 py-2 min-w-[6rem] h-9 leading-4 text-gray-900 bg-gray-200 border border-gray-500 rounded shadow active:scale-[.97]",onClick:()=>{e(!1)},children:"OK"}),n("button",{className:"px-4 py-2 min-w-[6rem] h-9 leading-4 text-gray-900 bg-gray-200 border border-gray-500 rounded shadow active:scale-[.97]",onClick:()=>{e(!1)},children:"Cancel"})]})]})]})}export{Dt as default};
